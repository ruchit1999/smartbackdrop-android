jdk:
  - openjdk17

before_install:
  - echo "Checking environment..."
  - echo "Java version: $(java -version)"
  - echo "Gradle version: $(./gradlew --version)"

install:
  - echo "Installing dependencies..."
  - ./gradlew dependencies

script:
  - echo "Building project..."
  - ./gradlew clean build --stacktrace
  - echo "Publishing to Maven local..."
  - ./gradlew publishToMavenLocal --stacktrace
  - echo "Verifying artifacts..."
  - ./gradlew :smartbackdrop-core:assembleRelease
  - ./gradlew :smartbackdrop-compose:assembleRelease
  - ./gradlew :smartbackdrop-views:assembleRelease

after_success:
  - echo "Build completed successfully!"
  - echo "Checking generated artifacts..."
  - find ~/.m2/repository -name "*smartbackdrop*" -type d | head -10

# JitPack will automatically publish these modules when a tag is pushed:
# - smartbackdrop-core
# - smartbackdrop-compose  
# - smartbackdrop-views
#
# Usage in other projects:
# implementation 'com.github.ruchit1999:smartbackdrop-core:VERSION'
# implementation 'com.github.ruchit1999:smartbackdrop-compose:VERSION'
# implementation 'com.github.ruchit1999:smartbackdrop-views:VERSION' 